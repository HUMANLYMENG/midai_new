# ==========================================
# Midai 生产环境配置文件
# ==========================================
# 
# 使用说明：
# 1. 复制此文件为 .env.production.local 并填入真实值
# 2. 或使用环境变量注入（Vercel/服务器）
# 3. 切勿将包含真实密钥的此文件提交到 Git！
#
# ==========================================
# 必需配置（无默认值，必须填写）
# ==========================================

# 运行环境 - 固定为 production
NODE_ENV="production"

# 数据库 URL（生产环境建议使用独立的数据库文件）
# 如果使用 Docker，建议挂载到持久化卷
DATABASE_URL="file:./prod.db"

# NextAuth.js 密钥 - 用于加密会话和令牌
# 生成命令: openssl rand -base64 32
# 或访问 https://generate-secret.vercel.app/32
NEXTAUTH_SECRET="CHANGE_THIS_TO_A_RANDOM_SECRET_KEY_MIN_32_CHARS"

# NextAuth.js 回调 URL - 必须是实际部署的域名
# 示例: https://midai.example.com 或 https://your-app.vercel.app
NEXTAUTH_URL="https://your-domain.com"

# ==========================================
# OAuth 认证（至少配置一个）
# ==========================================

# Google OAuth 2.0
# 获取地址: https://console.cloud.google.com/apis/credentials
# 回调地址: https://your-domain.com/api/auth/callback/google
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# Microsoft OAuth 2.0（Entra ID / Azure AD）
# 获取地址: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade
# 回调地址: https://your-domain.com/api/auth/callback/microsoft-entra-id
MICROSOFT_CLIENT_ID=""
MICROSOFT_CLIENT_SECRET=""
MICROSOFT_TENANT_ID="common"

# ==========================================
# 可选但推荐的配置
# ==========================================

# Spotify Web API - 用于获取专辑封面
# 获取地址: https://developer.spotify.com/dashboard
# 不配置也能运行，但封面获取功能会受限
SPOTIFY_CLIENT_ID=""
SPOTIFY_CLIENT_SECRET=""

# MusicBrainz API - 用于获取歌曲流派信息
# 无需 API Key，但需要设置应用信息标识你的应用
# 文档: https://musicbrainz.org/doc/MusicBrainz_API
MUSICBRAINZ_APP_NAME="Midai"
MUSICBRAINZ_APP_VERSION="1.0.0"
MUSICBRAINZ_CONTACT="your-email@example.com"

# ==========================================
# 可选配置（高级）
# ==========================================

# 信任主机（多域名部署时使用）
# NEXTAUTH_TRUST_HOST="true"

# 会话策略（默认 database）
# NEXTAUTH_SESSION_STRATEGY="database"

# 开发自动登录（生产环境必须关闭）
# DEV_AUTO_LOGIN="false"

# ==========================================
# 配置检查清单
# ==========================================
# 
# 部署前请确认：
# 
# [ ] NODE_ENV 设置为 "production"
# [ ] NEXTAUTH_SECRET 已设置为随机字符串（≥32字符）
# [ ] NEXTAUTH_URL 设置为实际的 HTTPS 域名
# [ ] DATABASE_URL 指向持久化存储路径
# [ ] 至少一个 OAuth Provider（Google 或 Microsoft）已配置
# [ ] OAuth 回调地址已在 Provider 后台正确配置
# [ ] 域名已启用 HTTPS（OAuth 必需）
# [ ] 数据库目录有写入权限
# [ ] .env.production 未提交到 Git 仓库
#
# ==========================================
# 快速验证命令
# ==========================================
#
# 构建应用：
#   npm run build
#
# 启动生产服务器：
#   npm start
#
# 检查数据库连接：
#   npx prisma db pull
#
# 查看数据库内容：
#   npx prisma studio
#
